{"ast":null,"code":"import { EndOfStreamError } from 'peek-readable';\nimport { Buffer } from 'node:buffer';\n/**\n * Core tokenizer\n */\nexport class AbstractTokenizer {\n  constructor(fileInfo) {\n    /**\n     * Tokenizer-stream position\n     */\n    this.position = 0;\n    this.numBuffer = new Uint8Array(8);\n    this.fileInfo = fileInfo ? fileInfo : {};\n  }\n  /**\n   * Read a token from the tokenizer-stream\n   * @param token - The token to read\n   * @param position - If provided, the desired position in the tokenizer-stream\n   * @returns Promise with token data\n   */\n  async readToken(token) {\n    let position = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : this.position;\n    const uint8Array = Buffer.alloc(token.len);\n    const len = await this.readBuffer(uint8Array, {\n      position\n    });\n    if (len < token.len) throw new EndOfStreamError();\n    return token.get(uint8Array, 0);\n  }\n  /**\n   * Peek a token from the tokenizer-stream.\n   * @param token - Token to peek from the tokenizer-stream.\n   * @param position - Offset where to begin reading within the file. If position is null, data will be read from the current file position.\n   * @returns Promise with token data\n   */\n  async peekToken(token) {\n    let position = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : this.position;\n    const uint8Array = Buffer.alloc(token.len);\n    const len = await this.peekBuffer(uint8Array, {\n      position\n    });\n    if (len < token.len) throw new EndOfStreamError();\n    return token.get(uint8Array, 0);\n  }\n  /**\n   * Read a numeric token from the stream\n   * @param token - Numeric token\n   * @returns Promise with number\n   */\n  async readNumber(token) {\n    const len = await this.readBuffer(this.numBuffer, {\n      length: token.len\n    });\n    if (len < token.len) throw new EndOfStreamError();\n    return token.get(this.numBuffer, 0);\n  }\n  /**\n   * Read a numeric token from the stream\n   * @param token - Numeric token\n   * @returns Promise with number\n   */\n  async peekNumber(token) {\n    const len = await this.peekBuffer(this.numBuffer, {\n      length: token.len\n    });\n    if (len < token.len) throw new EndOfStreamError();\n    return token.get(this.numBuffer, 0);\n  }\n  /**\n   * Ignore number of bytes, advances the pointer in under tokenizer-stream.\n   * @param length - Number of bytes to ignore\n   * @return resolves the number of bytes ignored, equals length if this available, otherwise the number of bytes available\n   */\n  async ignore(length) {\n    if (this.fileInfo.size !== undefined) {\n      const bytesLeft = this.fileInfo.size - this.position;\n      if (length > bytesLeft) {\n        this.position += bytesLeft;\n        return bytesLeft;\n      }\n    }\n    this.position += length;\n    return length;\n  }\n  async close() {\n    // empty\n  }\n  normalizeOptions(uint8Array, options) {\n    if (options && options.position !== undefined && options.position < this.position) {\n      throw new Error('`options.position` must be equal or greater than `tokenizer.position`');\n    }\n    if (options) {\n      return {\n        mayBeLess: options.mayBeLess === true,\n        offset: options.offset ? options.offset : 0,\n        length: options.length ? options.length : uint8Array.length - (options.offset ? options.offset : 0),\n        position: options.position ? options.position : this.position\n      };\n    }\n    return {\n      mayBeLess: false,\n      offset: 0,\n      length: uint8Array.length,\n      position: this.position\n    };\n  }\n}","map":{"version":3,"names":["EndOfStreamError","Buffer","AbstractTokenizer","constructor","fileInfo","position","numBuffer","Uint8Array","readToken","token","arguments","length","undefined","uint8Array","alloc","len","readBuffer","get","peekToken","peekBuffer","readNumber","peekNumber","ignore","size","bytesLeft","close","normalizeOptions","options","Error","mayBeLess","offset"],"sources":["C:/Users/Ferhat/Social-Media-App-Project/wsfrontend/node_modules/strtok3/lib/AbstractTokenizer.js"],"sourcesContent":["import { EndOfStreamError } from 'peek-readable';\nimport { Buffer } from 'node:buffer';\n/**\n * Core tokenizer\n */\nexport class AbstractTokenizer {\n    constructor(fileInfo) {\n        /**\n         * Tokenizer-stream position\n         */\n        this.position = 0;\n        this.numBuffer = new Uint8Array(8);\n        this.fileInfo = fileInfo ? fileInfo : {};\n    }\n    /**\n     * Read a token from the tokenizer-stream\n     * @param token - The token to read\n     * @param position - If provided, the desired position in the tokenizer-stream\n     * @returns Promise with token data\n     */\n    async readToken(token, position = this.position) {\n        const uint8Array = Buffer.alloc(token.len);\n        const len = await this.readBuffer(uint8Array, { position });\n        if (len < token.len)\n            throw new EndOfStreamError();\n        return token.get(uint8Array, 0);\n    }\n    /**\n     * Peek a token from the tokenizer-stream.\n     * @param token - Token to peek from the tokenizer-stream.\n     * @param position - Offset where to begin reading within the file. If position is null, data will be read from the current file position.\n     * @returns Promise with token data\n     */\n    async peekToken(token, position = this.position) {\n        const uint8Array = Buffer.alloc(token.len);\n        const len = await this.peekBuffer(uint8Array, { position });\n        if (len < token.len)\n            throw new EndOfStreamError();\n        return token.get(uint8Array, 0);\n    }\n    /**\n     * Read a numeric token from the stream\n     * @param token - Numeric token\n     * @returns Promise with number\n     */\n    async readNumber(token) {\n        const len = await this.readBuffer(this.numBuffer, { length: token.len });\n        if (len < token.len)\n            throw new EndOfStreamError();\n        return token.get(this.numBuffer, 0);\n    }\n    /**\n     * Read a numeric token from the stream\n     * @param token - Numeric token\n     * @returns Promise with number\n     */\n    async peekNumber(token) {\n        const len = await this.peekBuffer(this.numBuffer, { length: token.len });\n        if (len < token.len)\n            throw new EndOfStreamError();\n        return token.get(this.numBuffer, 0);\n    }\n    /**\n     * Ignore number of bytes, advances the pointer in under tokenizer-stream.\n     * @param length - Number of bytes to ignore\n     * @return resolves the number of bytes ignored, equals length if this available, otherwise the number of bytes available\n     */\n    async ignore(length) {\n        if (this.fileInfo.size !== undefined) {\n            const bytesLeft = this.fileInfo.size - this.position;\n            if (length > bytesLeft) {\n                this.position += bytesLeft;\n                return bytesLeft;\n            }\n        }\n        this.position += length;\n        return length;\n    }\n    async close() {\n        // empty\n    }\n    normalizeOptions(uint8Array, options) {\n        if (options && options.position !== undefined && options.position < this.position) {\n            throw new Error('`options.position` must be equal or greater than `tokenizer.position`');\n        }\n        if (options) {\n            return {\n                mayBeLess: options.mayBeLess === true,\n                offset: options.offset ? options.offset : 0,\n                length: options.length ? options.length : (uint8Array.length - (options.offset ? options.offset : 0)),\n                position: options.position ? options.position : this.position\n            };\n        }\n        return {\n            mayBeLess: false,\n            offset: 0,\n            length: uint8Array.length,\n            position: this.position\n        };\n    }\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}