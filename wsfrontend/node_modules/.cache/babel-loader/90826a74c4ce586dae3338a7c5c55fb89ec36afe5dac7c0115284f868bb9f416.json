{"ast":null,"code":"import * as ACTIONS from \"./Constants\";\nimport { login, signup, logout, likePostApi, unlikePostApi } from \"../api/apiCalls\";\nexport const logoutSucces = () => {\n  return async function (dispatch) {\n    try {\n      await logout();\n    } catch (error) {}\n    dispatch({\n      type: ACTIONS.LOGOUT_SUCCES\n    });\n  };\n};\nexport const loginSuccess = authState => {\n  return {\n    type: ACTIONS.LOGIN_SUCCES,\n    payload: authState\n  };\n};\nexport const updateSuccess = _ref => {\n  let {\n    displayName,\n    image\n  } = _ref;\n  return {\n    type: ACTIONS.UPDATE_SUCCESS,\n    payload: {\n      displayName,\n      image\n    }\n  };\n};\nexport const updateAdminStatus = admin => ({\n  type: ACTIONS.UPDATE_ADMIN_STATUS,\n  payload: {\n    admin\n  }\n});\nexport const loginHandler = credentials => {\n  return async function (dispatch) {\n    const response = await login(credentials);\n    const authState = {\n      ...response.data.user,\n      password: credentials.password,\n      token: response.data.token\n    };\n    dispatch(loginSuccess(authState));\n    dispatch(updateAdminStatus(response.data.user.admin));\n    return response;\n  };\n};\nexport const signupHandler = user => {\n  return async function (dispatch) {\n    const response = await signup(user);\n    await dispatch(loginHandler(user));\n    return response;\n  };\n};\nexport const likePost = postId => {\n  return async (dispatch, getState) => {\n    const {\n      username\n    } = getState();\n    await likePostApi(postId, username);\n    dispatch({\n      type: \"LIKE_POST\",\n      payload: {\n        postId,\n        username\n      }\n    });\n  };\n};\nexport const unlikePost = postId => {\n  return async (dispatch, getState) => {\n    const {\n      username\n    } = getState();\n    await unlikePostApi(postId, username);\n    dispatch({\n      type: \"UNLIKE_POST\",\n      payload: {\n        postId,\n        username\n      }\n    });\n  };\n};\nexport const saveLikedPostsToStorage = likedPosts => {\n  localStorage.setItem(\"likedPosts\", JSON.stringify(likedPosts));\n};\nexport const loadLikedPostsFromStorage = () => {\n  const likedPosts = localStorage.getItem(\"likedPosts\");\n  return likedPosts ? JSON.parse(likedPosts) : {};\n};","map":{"version":3,"names":["ACTIONS","login","signup","logout","likePostApi","unlikePostApi","logoutSucces","dispatch","error","type","LOGOUT_SUCCES","loginSuccess","authState","LOGIN_SUCCES","payload","updateSuccess","_ref","displayName","image","UPDATE_SUCCESS","updateAdminStatus","admin","UPDATE_ADMIN_STATUS","loginHandler","credentials","response","data","user","password","token","signupHandler","likePost","postId","getState","username","unlikePost","saveLikedPostsToStorage","likedPosts","localStorage","setItem","JSON","stringify","loadLikedPostsFromStorage","getItem","parse"],"sources":["C:/Users/Ferhat/Social-Media-App-Project/wsfrontend/src/redux/authActions.js"],"sourcesContent":["import * as ACTIONS from \"./Constants\";\r\nimport { login, signup, logout,likePostApi,unlikePostApi } from \"../api/apiCalls\";\r\n\r\nexport const logoutSucces = () => {\r\n  return async function (dispatch) {\r\n    try {\r\n      await logout();\r\n    } catch (error) {}\r\n    dispatch({\r\n      type: ACTIONS.LOGOUT_SUCCES,\r\n    });\r\n  };\r\n};\r\n\r\nexport const loginSuccess = (authState) => {\r\n  return {\r\n    type: ACTIONS.LOGIN_SUCCES,\r\n    payload: authState,\r\n  };\r\n};\r\n\r\nexport const updateSuccess = ({ displayName, image }) => {\r\n  return {\r\n    type: ACTIONS.UPDATE_SUCCESS,\r\n    payload: {\r\n      displayName,\r\n      image,\r\n    },\r\n  };\r\n};\r\n\r\nexport const updateAdminStatus = (admin) => ({\r\n  type: ACTIONS.UPDATE_ADMIN_STATUS,\r\n  payload: { admin },\r\n});\r\n\r\nexport const loginHandler = (credentials) => {\r\n  return async function (dispatch) {\r\n    const response = await login(credentials);\r\n    const authState = {\r\n      ...response.data.user,\r\n      password: credentials.password,\r\n      token: response.data.token,\r\n    };\r\n    dispatch(loginSuccess(authState));\r\n    dispatch(updateAdminStatus(response.data.user.admin));\r\n    return response;\r\n  };\r\n};\r\n\r\nexport const signupHandler = (user) => {\r\n  return async function (dispatch) {\r\n    const response = await signup(user);\r\n    await dispatch(loginHandler(user));\r\n    return response;\r\n  };\r\n};\r\nexport const likePost = (postId) => {\r\n  return async (dispatch, getState) => {\r\n    const { username } = getState();\r\n    await likePostApi(postId, username);\r\n    dispatch({ type: \"LIKE_POST\", payload: { postId, username } });\r\n  };\r\n};\r\n\r\nexport const unlikePost = (postId) => {\r\n  return async (dispatch, getState) => {\r\n    const { username } = getState();\r\n    await unlikePostApi(postId, username);\r\n    dispatch({ type: \"UNLIKE_POST\", payload: { postId, username } });\r\n  };\r\n};\r\nexport const saveLikedPostsToStorage = (likedPosts) => {\r\n  localStorage.setItem(\"likedPosts\", JSON.stringify(likedPosts));\r\n};\r\n\r\nexport const loadLikedPostsFromStorage = () => {\r\n  const likedPosts = localStorage.getItem(\"likedPosts\");\r\n  return likedPosts ? JSON.parse(likedPosts) : {};\r\n};\r\n"],"mappings":"AAAA,OAAO,KAAKA,OAAO,MAAM,aAAa;AACtC,SAASC,KAAK,EAAEC,MAAM,EAAEC,MAAM,EAACC,WAAW,EAACC,aAAa,QAAQ,iBAAiB;AAEjF,OAAO,MAAMC,YAAY,GAAGA,CAAA,KAAM;EAChC,OAAO,gBAAgBC,QAAQ,EAAE;IAC/B,IAAI;MACF,MAAMJ,MAAM,CAAC,CAAC;IAChB,CAAC,CAAC,OAAOK,KAAK,EAAE,CAAC;IACjBD,QAAQ,CAAC;MACPE,IAAI,EAAET,OAAO,CAACU;IAChB,CAAC,CAAC;EACJ,CAAC;AACH,CAAC;AAED,OAAO,MAAMC,YAAY,GAAIC,SAAS,IAAK;EACzC,OAAO;IACLH,IAAI,EAAET,OAAO,CAACa,YAAY;IAC1BC,OAAO,EAAEF;EACX,CAAC;AACH,CAAC;AAED,OAAO,MAAMG,aAAa,GAAGC,IAAA,IAA4B;EAAA,IAA3B;IAAEC,WAAW;IAAEC;EAAM,CAAC,GAAAF,IAAA;EAClD,OAAO;IACLP,IAAI,EAAET,OAAO,CAACmB,cAAc;IAC5BL,OAAO,EAAE;MACPG,WAAW;MACXC;IACF;EACF,CAAC;AACH,CAAC;AAED,OAAO,MAAME,iBAAiB,GAAIC,KAAK,KAAM;EAC3CZ,IAAI,EAAET,OAAO,CAACsB,mBAAmB;EACjCR,OAAO,EAAE;IAAEO;EAAM;AACnB,CAAC,CAAC;AAEF,OAAO,MAAME,YAAY,GAAIC,WAAW,IAAK;EAC3C,OAAO,gBAAgBjB,QAAQ,EAAE;IAC/B,MAAMkB,QAAQ,GAAG,MAAMxB,KAAK,CAACuB,WAAW,CAAC;IACzC,MAAMZ,SAAS,GAAG;MAChB,GAAGa,QAAQ,CAACC,IAAI,CAACC,IAAI;MACrBC,QAAQ,EAAEJ,WAAW,CAACI,QAAQ;MAC9BC,KAAK,EAAEJ,QAAQ,CAACC,IAAI,CAACG;IACvB,CAAC;IACDtB,QAAQ,CAACI,YAAY,CAACC,SAAS,CAAC,CAAC;IACjCL,QAAQ,CAACa,iBAAiB,CAACK,QAAQ,CAACC,IAAI,CAACC,IAAI,CAACN,KAAK,CAAC,CAAC;IACrD,OAAOI,QAAQ;EACjB,CAAC;AACH,CAAC;AAED,OAAO,MAAMK,aAAa,GAAIH,IAAI,IAAK;EACrC,OAAO,gBAAgBpB,QAAQ,EAAE;IAC/B,MAAMkB,QAAQ,GAAG,MAAMvB,MAAM,CAACyB,IAAI,CAAC;IACnC,MAAMpB,QAAQ,CAACgB,YAAY,CAACI,IAAI,CAAC,CAAC;IAClC,OAAOF,QAAQ;EACjB,CAAC;AACH,CAAC;AACD,OAAO,MAAMM,QAAQ,GAAIC,MAAM,IAAK;EAClC,OAAO,OAAOzB,QAAQ,EAAE0B,QAAQ,KAAK;IACnC,MAAM;MAAEC;IAAS,CAAC,GAAGD,QAAQ,CAAC,CAAC;IAC/B,MAAM7B,WAAW,CAAC4B,MAAM,EAAEE,QAAQ,CAAC;IACnC3B,QAAQ,CAAC;MAAEE,IAAI,EAAE,WAAW;MAAEK,OAAO,EAAE;QAAEkB,MAAM;QAAEE;MAAS;IAAE,CAAC,CAAC;EAChE,CAAC;AACH,CAAC;AAED,OAAO,MAAMC,UAAU,GAAIH,MAAM,IAAK;EACpC,OAAO,OAAOzB,QAAQ,EAAE0B,QAAQ,KAAK;IACnC,MAAM;MAAEC;IAAS,CAAC,GAAGD,QAAQ,CAAC,CAAC;IAC/B,MAAM5B,aAAa,CAAC2B,MAAM,EAAEE,QAAQ,CAAC;IACrC3B,QAAQ,CAAC;MAAEE,IAAI,EAAE,aAAa;MAAEK,OAAO,EAAE;QAAEkB,MAAM;QAAEE;MAAS;IAAE,CAAC,CAAC;EAClE,CAAC;AACH,CAAC;AACD,OAAO,MAAME,uBAAuB,GAAIC,UAAU,IAAK;EACrDC,YAAY,CAACC,OAAO,CAAC,YAAY,EAAEC,IAAI,CAACC,SAAS,CAACJ,UAAU,CAAC,CAAC;AAChE,CAAC;AAED,OAAO,MAAMK,yBAAyB,GAAGA,CAAA,KAAM;EAC7C,MAAML,UAAU,GAAGC,YAAY,CAACK,OAAO,CAAC,YAAY,CAAC;EACrD,OAAON,UAAU,GAAGG,IAAI,CAACI,KAAK,CAACP,UAAU,CAAC,GAAG,CAAC,CAAC;AACjD,CAAC"},"metadata":{},"sourceType":"module","externalDependencies":[]}