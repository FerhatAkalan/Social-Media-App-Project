{"ast":null,"code":"import { applyMiddleware, legacy_createStore as createStore, compose } from \"redux\";\nimport authReducer from \"./authReducer\";\nimport SecureLS from \"secure-ls\";\nimport thunk from \"redux-thunk\";\nimport { setAuthorizationHeader } from \"../api/apiCalls\";\nimport { loginSuccess } from \"./authActions\";\nconst secureLS = new SecureLS();\nconst getStateFormStorage = () => {\n  const postAuth = localStorage.getItem(\"post-auth\");\n  let stateInlocalStorage = {\n    isLoggedIn: false,\n    username: undefined,\n    displayName: undefined,\n    image: undefined,\n    password: undefined\n  };\n  if (postAuth) {\n    return postAuth;\n  }\n  return stateInlocalStorage;\n};\nconst updateStateInStorage = newState => {\n  secureLS.set(\"post-auth\", newState);\n};\nconst configureStore = () => {\n  const initialState = getStateFormStorage();\n  setAuthorizationHeader(initialState);\n  const composeEnhancers = window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__ || compose;\n  const store = createStore(authReducer, initialState, composeEnhancers(applyMiddleware(thunk)));\n  store.subscribe(() => {\n    updateStateInStorage(store.getState());\n    setAuthorizationHeader(store.getState());\n  });\n  window.addEventListener('load', () => {\n    const storedState = getStateFormStorage();\n    if (storedState.isLoggedIn) {\n      store.dispatch(loginSuccess(storedState));\n    }\n  });\n  return store;\n};\nexport default configureStore;","map":{"version":3,"names":["applyMiddleware","legacy_createStore","createStore","compose","authReducer","SecureLS","thunk","setAuthorizationHeader","loginSuccess","secureLS","getStateFormStorage","postAuth","localStorage","getItem","stateInlocalStorage","isLoggedIn","username","undefined","displayName","image","password","updateStateInStorage","newState","set","configureStore","initialState","composeEnhancers","window","__REDUX_DEVTOOLS_EXTENSION_COMPOSE__","store","subscribe","getState","addEventListener","storedState","dispatch"],"sources":["C:/Users/Ferhat/Social-Media-App-Project/wsfrontend/src/redux/configureStore.js"],"sourcesContent":["import {\r\n  applyMiddleware,\r\n  legacy_createStore as createStore,\r\n  compose,\r\n} from \"redux\";\r\nimport authReducer from \"./authReducer\";\r\nimport SecureLS from \"secure-ls\";\r\nimport thunk from \"redux-thunk\";\r\nimport { setAuthorizationHeader } from \"../api/apiCalls\";\r\nimport { loginSuccess } from \"./authActions\";\r\nconst secureLS = new SecureLS();\r\n\r\nconst getStateFormStorage = () => {\r\n  const postAuth = localStorage.getItem(\"post-auth\");\r\n\r\n  let stateInlocalStorage = {\r\n    isLoggedIn: false,\r\n    username: undefined,\r\n    displayName: undefined,\r\n    image: undefined,\r\n    password: undefined,\r\n  };\r\n\r\n  if (postAuth) {\r\n    return postAuth;\r\n  }\r\n  return stateInlocalStorage;\r\n};\r\n\r\nconst updateStateInStorage = (newState) => {\r\n  secureLS.set(\"post-auth\", newState);\r\n};\r\n\r\nconst configureStore = () => {\r\n  const initialState = getStateFormStorage();\r\n  setAuthorizationHeader(initialState);\r\n  const composeEnhancers =\r\n    window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__ || compose;\r\n  const store = createStore(\r\n    authReducer,\r\n    initialState,\r\n    composeEnhancers(applyMiddleware(thunk))\r\n  );\r\n\r\n  store.subscribe(() => {\r\n    updateStateInStorage(store.getState());\r\n    setAuthorizationHeader(store.getState());\r\n  });\r\n  window.addEventListener('load', () => {\r\n    const storedState = getStateFormStorage();\r\n    if (storedState.isLoggedIn) {\r\n      store.dispatch(loginSuccess(storedState));\r\n    }\r\n  });\r\n\r\n  return store;\r\n};\r\n\r\nexport default configureStore;\r\n"],"mappings":"AAAA,SACEA,eAAe,EACfC,kBAAkB,IAAIC,WAAW,EACjCC,OAAO,QACF,OAAO;AACd,OAAOC,WAAW,MAAM,eAAe;AACvC,OAAOC,QAAQ,MAAM,WAAW;AAChC,OAAOC,KAAK,MAAM,aAAa;AAC/B,SAASC,sBAAsB,QAAQ,iBAAiB;AACxD,SAASC,YAAY,QAAQ,eAAe;AAC5C,MAAMC,QAAQ,GAAG,IAAIJ,QAAQ,CAAC,CAAC;AAE/B,MAAMK,mBAAmB,GAAGA,CAAA,KAAM;EAChC,MAAMC,QAAQ,GAAGC,YAAY,CAACC,OAAO,CAAC,WAAW,CAAC;EAElD,IAAIC,mBAAmB,GAAG;IACxBC,UAAU,EAAE,KAAK;IACjBC,QAAQ,EAAEC,SAAS;IACnBC,WAAW,EAAED,SAAS;IACtBE,KAAK,EAAEF,SAAS;IAChBG,QAAQ,EAAEH;EACZ,CAAC;EAED,IAAIN,QAAQ,EAAE;IACZ,OAAOA,QAAQ;EACjB;EACA,OAAOG,mBAAmB;AAC5B,CAAC;AAED,MAAMO,oBAAoB,GAAIC,QAAQ,IAAK;EACzCb,QAAQ,CAACc,GAAG,CAAC,WAAW,EAAED,QAAQ,CAAC;AACrC,CAAC;AAED,MAAME,cAAc,GAAGA,CAAA,KAAM;EAC3B,MAAMC,YAAY,GAAGf,mBAAmB,CAAC,CAAC;EAC1CH,sBAAsB,CAACkB,YAAY,CAAC;EACpC,MAAMC,gBAAgB,GACpBC,MAAM,CAACC,oCAAoC,IAAIzB,OAAO;EACxD,MAAM0B,KAAK,GAAG3B,WAAW,CACvBE,WAAW,EACXqB,YAAY,EACZC,gBAAgB,CAAC1B,eAAe,CAACM,KAAK,CAAC,CACzC,CAAC;EAEDuB,KAAK,CAACC,SAAS,CAAC,MAAM;IACpBT,oBAAoB,CAACQ,KAAK,CAACE,QAAQ,CAAC,CAAC,CAAC;IACtCxB,sBAAsB,CAACsB,KAAK,CAACE,QAAQ,CAAC,CAAC,CAAC;EAC1C,CAAC,CAAC;EACFJ,MAAM,CAACK,gBAAgB,CAAC,MAAM,EAAE,MAAM;IACpC,MAAMC,WAAW,GAAGvB,mBAAmB,CAAC,CAAC;IACzC,IAAIuB,WAAW,CAAClB,UAAU,EAAE;MAC1Bc,KAAK,CAACK,QAAQ,CAAC1B,YAAY,CAACyB,WAAW,CAAC,CAAC;IAC3C;EACF,CAAC,CAAC;EAEF,OAAOJ,KAAK;AACd,CAAC;AAED,eAAeL,cAAc"},"metadata":{},"sourceType":"module","externalDependencies":[]}